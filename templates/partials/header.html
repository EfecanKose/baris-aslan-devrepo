{% load crispy_forms_tags %}
{% load static %}
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/css/bootstrap.min.css"
      integrity="sha512-wJmV9ZJjoxZPQZyfhSm34r76E07vPbrn+baF2KGvEiSgr1qwPLr+3P70t0i1q3xBxYzME8yRp6wAmHnpnAV99A=="
      crossorigin="anonymous" referrerpolicy="no-referrer"/>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css"
      integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">




{% block extra_css %}
    {{ form.media }}
{% endblock %}
{% block body %}

    <div class="navbar-custom ec-navbar-custom">

    <div class="container-fluid">

    <ul class="list-unstyled topnav-menu float-end mb-0">

        <li class="d-none d-lg-block">
            <form class="app-search">
                <div class="app-search-box dropdown">
                    <div class="input-group">
                        <input type="search" class="form-control" placeholder="Search..." id="top-search">

                        <button class="btn" type="submit">
                            <i class="fe-search"></i>
                        </button>
                    </div>
                    <div class="dropdown-menu dropdown-lg" id="search-dropdown">
                        <!-- item-->
                        <div class="dropdown-header noti-title">
                            <h5 class="text-overflow mb-2">Found <span class="text-danger">09</span> results</h5>
                        </div>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <i class="fe-home me-1"></i>
                            <span>Analytics Report</span>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <i class="fe-aperture me-1"></i>
                            <span>How can I help you?</span>
                        </a>

                        <!-- item-->
                        <a href="javascript:void(0);" class="dropdown-item notify-item">
                            <i class="fe-settings me-1"></i>
                            <span>User profile settings</span>
                        </a>

                        <!-- item-->
                        <div class="dropdown-header noti-title">
                            <h6 class="text-overflow mb-2 text-uppercase">Users</h6>
                        </div>

                        <div class="notification-list">
                            <!-- item-->
                            <a href="javascript:void(0);" class="dropdown-item notify-item">
                                <div class="d-flex">
                                    <img class="d-flex me-2 rounded-circle"
                                         src="{% static '/assets/images/users/avatar-2.jpg' %}"
                                         alt="Generic placeholder image" height="32">
                                    <div>
                                        <h5 class="m-0 font-14">Erwin E. Brown</h5>
                                        <span class="font-12 mb-0">UI Designer</span>
                                    </div>
                                </div>
                            </a>

                            <!-- item-->
                            <a href="javascript:void(0);" class="dropdown-item notify-item">
                                <div class="d-flex">
                                    <img class="d-flex me-2 rounded-circle"
                                         src="{% static '/assets/images/users/avatar-5.jpg' %}"
                                         alt="Generic placeholder image" height="32">
                                    <div>
                                        <h5 class="m-0 font-14">Jacob Deo</h5>
                                        <span class="font-12 mb-0">Developer</span>
                                    </div>
                                </div>
                            </a>
                        </div>

                    </div>
                </div>
            </form>
        </li>

        <li class="dropdown d-inline-block d-lg-none">
            <a class="nav-link dropdown-toggle arrow-none waves-effect waves-light" data-bs-toggle="dropdown"
               href="#" role="button" aria-haspopup="false" aria-expanded="false">
                <i class="fe-search noti-icon"></i>
            </a>
            <div class="dropdown-menu dropdown-lg dropdown-menu-end p-0">
                <form class="p-3">
                    <input type="text" class="form-control" placeholder="Search ..." aria-label="Search">
                </form>
            </div>
        </li>

        <li class="dropdown d-none d-lg-inline-block">
            <a class="nav-link dropdown-toggle arrow-none waves-effect waves-light" data-toggle="fullscreen"
               href="#">
                <i class="fe-maximize noti-icon"></i>
            </a>
        </li>

        <li class="dropdown d-none d-lg-inline-block topbar-dropdown">
            <a class="nav-link dropdown-toggle arrow-none waves-effect waves-light" data-bs-toggle="dropdown"
               href="#" role="button" aria-haspopup="false" aria-expanded="false">
                <i class="fe-grid noti-icon"></i>
            </a>
            <div class="dropdown-menu dropdown-lg dropdown-menu-end p-0">

                <div class="p-2">
                    <div class="row g-0">
                        <div class="col">
                            <a class="dropdown-icon-item" href="#">
                                <img src="{% static '/assets/images/brands/github.png' %}" alt="Github">
                                <span>GitHub</span>
                            </a>
                        </div>
                        <div class="col">
                            <a class="dropdown-icon-item" href="#">
                                <img src="{% static '/assets/images/brands/dribbble.png' %}" alt="dribbble">
                                <span>Dribbble</span>
                            </a>
                        </div>
                        <div class="col">
                            <a class="dropdown-icon-item" href="#">
                                <img src="{% static '/assets/images/brands/slack.png' %}" alt="slack">
                                <span>Slack</span>
                            </a>
                        </div>
                    </div>

                    <div class="row g-0">
                        <div class="col">
                            <a class="dropdown-icon-item" href="#">
                                <img src="{% static '/assets/images/brands/g-suite.png' %}" alt="G Suite">
                                <span>G Suite</span>
                            </a>
                        </div>
                        <div class="col">
                            <a class="dropdown-icon-item" href="#">
                                <img src="{% static '/assets/images/brands/bitbucket.png' %}" alt="bitbucket">
                                <span>Bitbucket</span>
                            </a>
                        </div>
                        <div class="col">
                            <a class="dropdown-icon-item" href="#">
                                <img src="{% static '/assets/images/brands/dropbox.png' %}" alt="dropbox">
                                <span>Dropbox</span>
                            </a>
                        </div>
                    </div>
                </div>

            </div>
        </li>

        <li class="dropdown d-none d-lg-inline-block topbar-dropdown">
            <a class="nav-link dropdown-toggle arrow-none waves-effect waves-light" data-bs-toggle="dropdown"
               href="#" role="button" aria-haspopup="false" aria-expanded="false">
                <img src="{% static '/assets/images/flags/us.jpg' %}" alt="user-image" height="14">
            </a>
            <div class="dropdown-menu dropdown-menu-end">

                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item">
                    <img src="{% static '/assets/images/flags/germany.jpg' %}" alt="user-image" class="me-1"
                         height="12"> <span class="align-middle">German</span>
                </a>

                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item">
                    <img src="{% static '/assets/images/flags/italy.jpg' %}" alt="user-image" class="me-1"
                         height="12"> <span class="align-middle">Italian</span>
                </a>

                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item">
                    <img src="{% static '/assets/images/flags/spain.jpg' %}" alt="user-image" class="me-1"
                         height="12"> <span class="align-middle">Spanish</span>
                </a>

                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item">
                    <img src="{% static '/assets/images/flags/russia.jpg' %}" alt="user-image" class="me-1"
                         height="12"> <span class="align-middle">Russian</span>
                </a>

            </div>
        </li>

        <li class="dropdown notification-list topbar-dropdown">
            <a class="nav-link dropdown-toggle waves-effect waves-light" data-bs-toggle="dropdown" href="#"
               role="button" aria-haspopup="false" aria-expanded="false">
                <i class="fe-bell noti-icon"></i>
                <span class="badge bg-danger rounded-circle noti-icon-badge">5</span>
            </a>
            <div class="dropdown-menu dropdown-menu-end dropdown-lg">

                <!-- item-->
                <div class="dropdown-item noti-title">
                    <h5 class="m-0">
                                        <span class="float-end">
                                            <a href="" class="text-dark">
                                                <small>Clear All</small>
                                            </a>
                                        </span>Notification
                    </h5>
                </div>

                <div class="noti-scroll" data-simplebar>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item active">
                        <div class="notify-icon bg-soft-primary text-primary">
                            <i class="mdi mdi-comment-account-outline"></i>
                        </div>
                        <p class="notify-details">Doug Dukes commented on Admin Dashboard
                            <small class="text-muted">1 min ago</small>
                        </p>
                    </a>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <div class="notify-icon">
                            <img src="{% static '/assets/images/users/avatar-2.jpg' %}"
                                 class="img-fluid rounded-circle" alt=""/></div>
                        <p class="notify-details">Mario Drummond</p>
                        <p class="text-muted mb-0 user-msg">
                            <small>Hi, How are you? What about our next meeting</small>
                        </p>
                    </a>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <div class="notify-icon">
                            <img src="{% static '/assets/images/users/avatar-4.jpg' %}"
                                 class="img-fluid rounded-circle" alt=""/></div>
                        <p class="notify-details">Karen Robinson</p>
                        <p class="text-muted mb-0 user-msg">
                            <small>Wow ! this admin looks good and awesome design</small>
                        </p>
                    </a>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <div class="notify-icon bg-soft-warning text-warning">
                            <i class="mdi mdi-account-plus"></i>
                        </div>
                        <p class="notify-details">New user registered.
                            <small class="text-muted">5 hours ago</small>
                        </p>
                    </a>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <div class="notify-icon bg-info">
                            <i class="mdi mdi-comment-account-outline"></i>
                        </div>
                        <p class="notify-details">Caleb Flakelar commented on Admin
                            <small class="text-muted">4 days ago</small>
                        </p>
                    </a>

                    <!-- item-->
                    <a href="javascript:void(0);" class="dropdown-item notify-item">
                        <div class="notify-icon bg-secondary">
                            <i class="mdi mdi-heart"></i>
                        </div>
                        <p class="notify-details">Carlos Crouch liked
                            <b>Admin</b>
                            <small class="text-muted">13 days ago</small>
                        </p>
                    </a>
                </div>

                <!-- All-->
                <a href="javascript:void(0);" class="dropdown-item text-center text-primary notify-item notify-all">
                    View all
                    <i class="fe-arrow-right"></i>
                </a>

            </div>
        </li>

        <li class="dropdown notification-list topbar-dropdown">
            <a class="nav-link dropdown-toggle nav-user me-0 waves-effect waves-light" data-bs-toggle="dropdown"
               href="#" role="button" aria-haspopup="false" aria-expanded="false">
                <img src="{% static '/assets/images/users/avatar-1.jpg' %}" alt="user-image" class="rounded-circle">
                <span class="pro-user-name ms-1">
                                    {{ user }} <i class="mdi mdi-chevron-down"></i>
                                </span>
            </a>
            <div class="dropdown-menu dropdown-menu-end profile-dropdown ">
                <!-- item-->
                <div class="dropdown-header noti-title">
                    <h6 class="text-overflow m-0">Welcome ! {{ user }}</h6>
                </div>

                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item notify-item">
                    <i class="ri-account-circle-line"></i>
                    <span>My Account</span>
                </a>


                <!-- item-->
                {% if user.is_authenticated and user.is_staff %}
                    <a href="/data_table" class="dropdown-item notify-item">
                        <i class="ri-database-line"></i>
                        <span>Data Table</span>
                    </a>
                {% endif %}

                {% if not request.user.is_authenticated %}
                    <a href="/accounts/signup" class="dropdown-item notify-item">

                        <i class="ri-account-pin-box-fill"></i>
                        <span>Üye Ol</span>
                    </a>

                    <a href="/accounts/login" class="dropdown-item notify-item">
                        <i class="ri-login-box-line"></i>
                        <span>Giriş</span>
                    </a>
                {% else %}
                    <a href="/accounts/logout" class="dropdown-item notify-item">
                        <i class="ri-logout-box-line"></i>
                        <span>Çıkış Yap</span>
                    </a>
                {% endif %}
            </div>
        </li>

        <li class="dropdown notification-list">
            <a href="javascript:void(0);" class="nav-link right-bar-toggle waves-effect waves-light">
                <i class="fe-settings noti-icon"></i>
            </a>
        </li>

    </ul>

    <!-- LOGO -->
    <div class="logo-box">
        <a href="/" class="logo logo-dark text-center">
                            <span class="logo-sm">
                                <img src="{% static '/assets/images/logo-sm-dark.png' %}" alt="" height="24">
                                <!-- <span class="logo-lg-text-light">Minton</span> -->
                            </span>
            <span class="logo-lg">
                                <img src="{% static '/assets/images/logo-dark.png' %}" alt="" height="20">
                <!-- <span class="logo-lg-text-light">M</span> -->
                            </span>
        </a>

        <a href="/" class="logo logo-light text-center">
                            <span class="logo-sm">
                                <img src="{% static '/assets/images/logo-sm.png' %}" alt="" height="24">
                            </span>
            <span class="logo-lg">
                                <img src="{% static '/assets/images/logo-light.png' %}" alt="" height="20">
                            </span>
        </a>
    </div>

    <ul class="list-unstyled topnav-menu topnav-menu-left m-0">
        <li>
            <button class="button-menu-mobile waves-effect waves-light">
                <i class="fe-menu"></i>
            </button>
        </li>

        <li>
            <!-- Mobile menu toggle (Horizontal Layout)-->
            <a class="navbar-toggle nav-link" data-bs-toggle="collapse" data-bs-target="#topnav-menu-content">
                <div class="lines">
                    <span></span>
                    <span></span>
                    <span></span>
                </div>
            </a>
            <!-- End mobile menu toggle-->
        </li>

        <li class="dropdown d-none d-xl-block">
            <a class="nav-link dropdown-toggle waves-effect waves-light" data-bs-toggle="dropdown" href="#"
               role="button" aria-haspopup="false" aria-expanded="false">
                Menu
                <i class="mdi mdi-chevron-down"></i>
            </a>
            <div class="dropdown-menu">
                <!-- item-->
                <a href="/post/create" class="dropdown-item">
                    <i class="fe-briefcase me-1"></i>
                    <span>Yazı Ekle</span>
                </a>

                <!-- item-->
                <a href="/post/index" class="dropdown-item">
                    <i class="fe-user me-1"></i>
                    <span>Postlar</span>
                </a>


                <div class="dropdown-divider"></div>

                <!-- item-->
                <a href="javascript:void(0);" class="dropdown-item">
                    <i class="fe-headphones me-1"></i>
                    <span>Help & Support</span>
                </a>

            </div>
        </li>


        <div class="button-list">

            <button type="button" class="btn btn-pink" id="create-book-sync" data-bs-toggle="modal"
                    data-bs-target="#full-width-modal">Full width
                Modal
            </button>


        </div>


        <div id="full-width-modal" class="modal fade" tabindex="-1" role="dialog"
             aria-labelledby="fullWidthModalLabel"
             aria-hidden="true">
            <div class="modal-dialog modal-full-width">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="fullWidthModalLabel">Form</h4>
                        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                    </div>
                    <div class="modal-body">
                        <form id="myForm" onsubmit="submitForm(event)" method="POST" action="{% url 'home' %}"
                              enctype="multipart/form-data">
                            {% csrf_token %}
                            {{ form|crispy }}
                            {% for message in messages %}
                                {% if message.tags == 'success' %}
                                    <div class="alert alert-primary alert-dismissible fade show" role="alert">
                                        {{ message }}
                                        <button type="button" class="btn-close" data-bs-dismiss="alert"
                                                aria-label="Close"></button>
                                    </div>
                                {% endif %}
                            {% endfor %}

                    </div>


                    <div class="modal-footer">
                        <button type="button" class="btn btn-light" data-bs-dismiss="modal">Kapat</button>
                        <button type="submit" class="btn btn-primary" formnovalidate="formnovalidate">Create</button>

                    </div>
                </div><!-- /.modal-content -->
            </div><!-- /.modal-dialog -->
        </div><!-- /.modal -->
    </ul>


    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.1.3/js/bootstrap.min.js"
            integrity="sha512-5bJXZ8OYKX3gxb5MyKwSYzFUVIjevI60dD0j4yR8vnZnINQVgzz3V+EP4De/U0t8LJiQzzHYzhpGq2+KKJl/Kw=="
            crossorigin="anonymous" referrerpolicy="no-referrer"></script>








    {% block extrascripts %}
        <script type="text/javascript">
            $(function () {
                // Login
                $("#login-btn").modalForm({
                    formURL: "{% url 'account_login' %}"
                });

                //  Signup
                $("#signup-btn").modalForm({
                    formURL: "{% url 'account_signup' %}"
                });

                // Create book synchronous
                function createBookSyncModalForm() {
                    $("#create-book-sync").modalForm({
                        formURL: "{% url 'post:create' %}",
                        modalID: "#create-modal"
                    });
                }

                createBookSyncModalForm();

                // Create book asynchronous button
                // message
                    var asyncSuccessMessageCreate = [
                        "<div ",
                        "style='position:fixed;top:0;z-index:10000;width:100%;border-radius:0;' ",
                        "class='alert alert-icon alert-success alert-dismissible fade show mb-0' role='alert'>",
                        "Success: Book was created.",
                        "<button type='button' class='close' data-dismiss='alert' aria-label='Close'>",
                        "<span aria-hidden='true'>&times;</span>",
                        "</button>",
                        "</div>",
                        "<script>",
                        "$('.alert').fadeTo(2000, 500).slideUp(500, function () {$('.alert').slideUp(500).remove();});",
                        "<\/script>"
                    ].join("");

                // modal form
                function createBookAsyncModalForm() {
                    $("#create-book-async").modalForm({
                        formURL: "{% url 'create_book' %}",
                        modalID: "#create-modal",
                        asyncUpdate: true,
                        asyncSettings: {
                            closeOnSubmit: true,
                            successMessage: asyncSuccessMessageCreate,
                            dataUrl: "books/",
                            dataElementId: "#books-table",
                            dataKey: "table",
                            addModalFormFunction: reinstantiateModalForms
                        }
                    });
                }

                createBookAsyncModalForm();

                // Update book asynchronous button
                // message
                var asyncSuccessMessageUpdate = [
                    "<div ",
                    "style='position:fixed;top:0;z-index:10000;width:100%;border-radius:0;' ",
                    "class='alert alert-icon alert-success alert-dismissible fade show mb-0' role='alert'>",
                    "Success: Book was updated.",
                    "<button type='button' class='close' data-dismiss='alert' aria-label='Close'>",
                    "<span aria-hidden='true'>&times;</span>",
                    "</button>",
                    "</div>",
                    "<script>",
                    "$('.alert').fadeTo(2000, 500).slideUp(500, function () {$('.alert').slideUp(500).remove();});",
                    "<\/script>"
                ].join("");

                // modal form
                function updateBookModalForm() {
                    $(".update-book").each(function () {
                        $(this).modalForm({
                            formURL: $(this).data("form-url"),
                            asyncUpdate: true,
                            asyncSettings: {
                                closeOnSubmit: false,
                                successMessage: asyncSuccessMessageUpdate,
                                dataUrl: "books/",
                                dataElementId: "#books-table",
                                dataKey: "table",
                                addModalFormFunction: reinstantiateModalForms
                            }
                        });
                    });
                }

                updateBookModalForm();

                // Delete book buttons - formURL is retrieved from the data of the element
                function deleteBookModalForm() {
                    $(".delete-book").each(function () {
                        $(this).modalForm({formURL: $(this).data("form-url"), isDeleteForm: true});
                    });
                }

                deleteBookModalForm();

                // Read book buttons
                function readBookModalForm() {
                    $(".read-book").each(function () {
                        $(this).modalForm({formURL: $(this).data("form-url")});
                    });
                }

                readBookModalForm();

                function reinstantiateModalForms() {
                    createBookAsyncModalForm();
                    readBookModalForm();
                    updateBookModalForm();
                    deleteBookModalForm();
                }

                // Filter books button
                $("#filter-book").each(function () {
                    $(this).modalForm({formURL: $(this).data("form-url")});
                });

                // Hide message
                $(".alert").fadeTo(2000, 500).slideUp(500, function () {
                    $(".alert").slideUp(500);
                });
            });
        </script>
    {% endblock extrascripts %}

{% endblock %}









